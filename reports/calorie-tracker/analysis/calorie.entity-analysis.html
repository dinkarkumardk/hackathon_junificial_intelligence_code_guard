<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>calorie.entity.ts - Detailed Analysis</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
.container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #007acc; }
.header h1 { color: #007acc; margin: 0; font-size: 2.2em; }
.back-link { display: inline-block; margin-bottom: 20px; color: #007acc; text-decoration: none; font-weight: bold; }
.back-link:hover { text-decoration: underline; }
.summary-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #007acc; }
.score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
.score-item { background: white; padding: 15px; border-radius: 6px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.score-value { font-size: 1.8em; font-weight: bold; color: #007acc; }
.score-label { color: #666; margin-top: 5px; font-size: 0.9em; }
.analysis-section { margin: 30px 0; padding: 20px; background: #fafafa; border-radius: 8px; border: 1px solid #e0e0e0; }
.analysis-section h2 { color: #333; margin-bottom: 15px; border-bottom: 2px solid #007acc; padding-bottom: 8px; }
.reasoning-text { color: #555; line-height: 1.6; margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border-left: 3px solid #007acc; }
.recommendations { margin-top: 20px; }
.recommendations h3 { color: #007acc; margin-bottom: 10px; }
.recommendations ul { margin: 0; padding-left: 25px; }
.recommendations li { margin: 8px 0; color: #555; line-height: 1.5; display: flex; justify-content: space-between; align-items: flex-start; }
.recommendation-text { flex: 1; margin-right: 10px; }
.fix-button { background: linear-gradient(45deg, #007acc, #005999); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.8em; font-weight: bold; transition: all 0.3s ease; white-space: nowrap; }
.fix-button:hover { background: linear-gradient(45deg, #005999, #003d73); transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.fix-button:active { transform: translateY(0); }
.fix-button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.fix-status { margin-left: 5px; font-size: 0.8em; }
.fix-success { color: #28a745; }
.fix-error { color: #dc3545; }
.fix-loading { color: #ffc107; }
.metrics-section { margin: 30px 0; }
.metrics-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.metrics-table th, .metrics-table td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
.metrics-table th { background-color: #007acc; color: white; }
.quality-indicator { padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; text-align: center; }
.quality-green { background-color: #28a745; }
.quality-yellow { background-color: #ffc107; color: black; }
.quality-red { background-color: #dc3545; }
.final-score { font-size: 2.5em; font-weight: bold; color: #007acc; text-align: center; margin: 20px 0; }
</style>
<script>
function fixWithAI(category, recommendation, button) {
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'Fixing...';
    button.style.background = '#ffc107';
    
    // Create status indicator
    const statusSpan = document.createElement('span');
    statusSpan.className = 'fix-status fix-loading';
    statusSpan.textContent = ' ⏳';
    button.parentNode.appendChild(statusSpan);
    
    // Simulate AI processing (replace with actual API call)
    setTimeout(() => {
        // For demo purposes, randomly succeed or fail
        const success = Math.random() > 0.3;
        
        if (success) {
            button.textContent = 'Fixed ✓';
            button.style.background = '#28a745';
            statusSpan.className = 'fix-status fix-success';
            statusSpan.textContent = ' Applied';
            
            // Show success message
            showNotification('Fix applied successfully for: ' + category, 'success');
        } else {
            button.textContent = 'Retry';
            button.style.background = '#dc3545';
            button.disabled = false;
            statusSpan.className = 'fix-status fix-error';
            statusSpan.textContent = ' Failed';
            
            // Show error message
            showNotification('Failed to apply fix. Please try again.', 'error');
        }
    }, 2000 + Math.random() * 3000); // 2-5 second delay
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        padding: 12px 20px; border-radius: 6px; color: white;
        font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateX(100%); transition: transform 0.3s ease;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    // Slide in
    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
    
    // Slide out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 4000);
}
</script>
</head>
<body>
<div class="container">
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
<div class="header">
<h1>calorie.entity.ts</h1>
<p>Detailed Code Analysis Results</p>
</div>
<div class="summary-card">
<div class="final-score">92.0</div>
<div style="text-align: center;">
<span class="quality-indicator quality-green">High Quality</span></div></div>
<div class="score-grid">
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Code Quality</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">SOLID Principles</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Design Patterns</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Security</div>
</div>
<div class="score-item">
<div class="score-value">100.0</div>
<div class="score-label">Bug Detection</div>
</div>
</div>
<div class="analysis-section">
<h2>Code Quality Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is well-structured, clean, and follows good practices for a TypeScript entity class. However, it lacks comments and documentation which could improve its readability and maintainability.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add comments to describe the purpose of the class and its properties.</span><button class="fix-button" id="fix-code-quality-analysis-0" onclick="fixWithAI('Code Quality Analysis', 'Add comments to describe the purpose of the class and its properties.', this)" data-category="Code Quality Analysis" data-recommendation="Add comments to describe the purpose of the class and its properties.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding more specific types for the columns if applicable, instead of using &#39;text&#39; and &#39;int&#39;.</span><button class="fix-button" id="fix-code-quality-analysis-1" onclick="fixWithAI('Code Quality Analysis', 'Consider adding more specific types for the columns if applicable, instead of using &#39;text&#39; and &#39;int&#39;.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding more specific types for the columns if applicable, instead of using &#39;text&#39; and &#39;int&#39;.">Fix with AI</button></li>
<li><span class="recommendation-text">The &#39;deleted&#39; field could be renamed to &#39;isDeleted&#39; to better reflect that it&#39;s a boolean.</span><button class="fix-button" id="fix-code-quality-analysis-2" onclick="fixWithAI('Code Quality Analysis', 'The &#39;deleted&#39; field could be renamed to &#39;isDeleted&#39; to better reflect that it&#39;s a boolean.', this)" data-category="Code Quality Analysis" data-recommendation="The &#39;deleted&#39; field could be renamed to &#39;isDeleted&#39; to better reflect that it&#39;s a boolean.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding validation decorators to ensure data integrity.</span><button class="fix-button" id="fix-code-quality-analysis-3" onclick="fixWithAI('Code Quality Analysis', 'Consider adding validation decorators to ensure data integrity.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding validation decorators to ensure data integrity.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding indexes to frequently queried columns for performance optimization.</span><button class="fix-button" id="fix-code-quality-analysis-4" onclick="fixWithAI('Code Quality Analysis', 'Consider adding indexes to frequently queried columns for performance optimization.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding indexes to frequently queried columns for performance optimization.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>SOLID Principles Analysis (90.0/100)</h2>
<div class="reasoning-text">The Calorie class is mostly adhering to the Single Responsibility Principle, as it is primarily concerned with representing a Calorie entity and its interactions with the database. However, it also includes a &#39;deleted&#39; field which might be better handled by a separate class or service responsible for soft deletes.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Consider removing the &#39;deleted&#39; field from the Calorie class and handle soft deletes in a separate class or service.</span><button class="fix-button" id="fix-solid-principles-analysis-0" onclick="fixWithAI('SOLID Principles Analysis', 'Consider removing the &#39;deleted&#39; field from the Calorie class and handle soft deletes in a separate class or service.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider removing the &#39;deleted&#39; field from the Calorie class and handle soft deletes in a separate class or service.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that any logic related to the &#39;deleted&#39; field is not handled within the Calorie class.</span><button class="fix-button" id="fix-solid-principles-analysis-1" onclick="fixWithAI('SOLID Principles Analysis', 'Ensure that any logic related to the &#39;deleted&#39; field is not handled within the Calorie class.', this)" data-category="SOLID Principles Analysis" data-recommendation="Ensure that any logic related to the &#39;deleted&#39; field is not handled within the Calorie class.">Fix with AI</button></li>
<li><span class="recommendation-text">Keep the Calorie class focused on representing the Calorie entity and its interactions with the database.</span><button class="fix-button" id="fix-solid-principles-analysis-2" onclick="fixWithAI('SOLID Principles Analysis', 'Keep the Calorie class focused on representing the Calorie entity and its interactions with the database.', this)" data-category="SOLID Principles Analysis" data-recommendation="Keep the Calorie class focused on representing the Calorie entity and its interactions with the database.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate UserCalorie class if there are complex interactions between User and Calorie that go beyond a simple ManyToOne relationship.</span><button class="fix-button" id="fix-solid-principles-analysis-3" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate UserCalorie class if there are complex interactions between User and Calorie that go beyond a simple ManyToOne relationship.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate UserCalorie class if there are complex interactions between User and Calorie that go beyond a simple ManyToOne relationship.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that any methods added to the Calorie class in the future adhere to the Single Responsibility Principle.</span><button class="fix-button" id="fix-solid-principles-analysis-4" onclick="fixWithAI('SOLID Principles Analysis', 'Ensure that any methods added to the Calorie class in the future adhere to the Single Responsibility Principle.', this)" data-category="SOLID Principles Analysis" data-recommendation="Ensure that any methods added to the Calorie class in the future adhere to the Single Responsibility Principle.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Design Patterns Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is well-structured and follows the Repository pattern, which is a good practice for separating the logic that retrieves the data and maps it to the entity model. However, the &#39;deleted&#39; field could be better managed with a Soft Delete pattern.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Consider using the Soft Delete pattern provided by TypeORM instead of manually managing a &#39;deleted&#39; field.</span><button class="fix-button" id="fix-design-patterns-analysis-0" onclick="fixWithAI('Design Patterns Analysis', 'Consider using the Soft Delete pattern provided by TypeORM instead of manually managing a &#39;deleted&#39; field.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using the Soft Delete pattern provided by TypeORM instead of manually managing a &#39;deleted&#39; field.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that the relationship between User and Calorie entities is correctly set up in the User entity as well.</span><button class="fix-button" id="fix-design-patterns-analysis-1" onclick="fixWithAI('Design Patterns Analysis', 'Ensure that the relationship between User and Calorie entities is correctly set up in the User entity as well.', this)" data-category="Design Patterns Analysis" data-recommendation="Ensure that the relationship between User and Calorie entities is correctly set up in the User entity as well.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding validation decorators to the fields to ensure data integrity.</span><button class="fix-button" id="fix-design-patterns-analysis-2" onclick="fixWithAI('Design Patterns Analysis', 'Consider adding validation decorators to the fields to ensure data integrity.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider adding validation decorators to the fields to ensure data integrity.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding comments to your code to improve readability and maintainability.</span><button class="fix-button" id="fix-design-patterns-analysis-3" onclick="fixWithAI('Design Patterns Analysis', 'Consider adding comments to your code to improve readability and maintainability.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider adding comments to your code to improve readability and maintainability.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding more specific column options, such as length, unique etc., if necessary.</span><button class="fix-button" id="fix-design-patterns-analysis-4" onclick="fixWithAI('Design Patterns Analysis', 'Consider adding more specific column options, such as length, unique etc., if necessary.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider adding more specific column options, such as length, unique etc., if necessary.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Security Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is generally secure and follows best practices for TypeScript and TypeORM, but it does not implement any explicit security measures such as input validation or encryption for sensitive data.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Implement input validation to prevent SQL injection attacks.</span><button class="fix-button" id="fix-security-analysis-0" onclick="fixWithAI('Security Analysis', 'Implement input validation to prevent SQL injection attacks.', this)" data-category="Security Analysis" data-recommendation="Implement input validation to prevent SQL injection attacks.">Fix with AI</button></li>
<li><span class="recommendation-text">Encrypt sensitive data such as user IDs to prevent data leaks in the event of a breach.</span><button class="fix-button" id="fix-security-analysis-1" onclick="fixWithAI('Security Analysis', 'Encrypt sensitive data such as user IDs to prevent data leaks in the event of a breach.', this)" data-category="Security Analysis" data-recommendation="Encrypt sensitive data such as user IDs to prevent data leaks in the event of a breach.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding a user role check before certain operations to implement role-based access control.</span><button class="fix-button" id="fix-security-analysis-2" onclick="fixWithAI('Security Analysis', 'Consider adding a user role check before certain operations to implement role-based access control.', this)" data-category="Security Analysis" data-recommendation="Consider adding a user role check before certain operations to implement role-based access control.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using UUIDs instead of sequential IDs for the primary key to make it harder to guess valid IDs.</span><button class="fix-button" id="fix-security-analysis-3" onclick="fixWithAI('Security Analysis', 'Consider using UUIDs instead of sequential IDs for the primary key to make it harder to guess valid IDs.', this)" data-category="Security Analysis" data-recommendation="Consider using UUIDs instead of sequential IDs for the primary key to make it harder to guess valid IDs.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider implementing soft delete functionality to prevent accidental data loss.</span><button class="fix-button" id="fix-security-analysis-4" onclick="fixWithAI('Security Analysis', 'Consider implementing soft delete functionality to prevent accidental data loss.', this)" data-category="Security Analysis" data-recommendation="Consider implementing soft delete functionality to prevent accidental data loss.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Bug Detection Analysis (100.0/100)</h2>
<div class="reasoning-text">The code appears to be bug-free. It is a simple TypeScript class definition using TypeORM decorators to define a Calorie entity. There are no logical errors, null pointer exceptions, array bounds errors, infinite loops, incorrect logic conditions, resource leaks, or race conditions present.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Ensure that the User entity has a &#39;calories&#39; property as it is being referenced in the ManyToOne relationship.</span><button class="fix-button" id="fix-bug-detection-analysis-0" onclick="fixWithAI('Bug Detection Analysis', 'Ensure that the User entity has a &#39;calories&#39; property as it is being referenced in the ManyToOne relationship.', this)" data-category="Bug Detection Analysis" data-recommendation="Ensure that the User entity has a &#39;calories&#39; property as it is being referenced in the ManyToOne relationship.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding validation to the &#39;calories&#39; and &#39;description&#39; fields to ensure data integrity.</span><button class="fix-button" id="fix-bug-detection-analysis-1" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding validation to the &#39;calories&#39; and &#39;description&#39; fields to ensure data integrity.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding validation to the &#39;calories&#39; and &#39;description&#39; fields to ensure data integrity.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling cases where the &#39;user&#39; field is null or undefined.</span><button class="fix-button" id="fix-bug-detection-analysis-2" onclick="fixWithAI('Bug Detection Analysis', 'Consider handling cases where the &#39;user&#39; field is null or undefined.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider handling cases where the &#39;user&#39; field is null or undefined.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that the &#39;deleted&#39; field is being used correctly in the application logic.</span><button class="fix-button" id="fix-bug-detection-analysis-3" onclick="fixWithAI('Bug Detection Analysis', 'Ensure that the &#39;deleted&#39; field is being used correctly in the application logic.', this)" data-category="Bug Detection Analysis" data-recommendation="Ensure that the &#39;deleted&#39; field is being used correctly in the application logic.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding comments to the code to improve readability and maintainability.</span><button class="fix-button" id="fix-bug-detection-analysis-4" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding comments to the code to improve readability and maintainability.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding comments to the code to improve readability and maintainability.">Fix with AI</button></li>
</ul></div>
</div>
<div class="metrics-section">
<h2>File Metrics</h2>
<table class="metrics-table">
<tr><th>Metric</th><th>Value</th></tr>
<tr><td>Comment ratio</td><td>0.0</td></tr>
<tr><td>Lines of code</td><td>34</td></tr>
<tr><td>Number of methods</td><td>0</td></tr>
<tr><td>Number of classes</td><td>1</td></tr>
<tr><td>Cyclomatic complexity</td><td>1</td></tr>
<tr><td>Code complexity</td><td>LOW</td></tr>
</table></div>
<div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
<p>Analysis generated on 2025-08-03 12:58:17 by Code Guard</p>
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
</div>
</div>
</body>
</html>
