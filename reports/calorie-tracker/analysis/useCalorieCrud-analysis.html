<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>useCalorieCrud.ts - Detailed Analysis</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
.container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #007acc; }
.header h1 { color: #007acc; margin: 0; font-size: 2.2em; }
.back-link { display: inline-block; margin-bottom: 20px; color: #007acc; text-decoration: none; font-weight: bold; }
.back-link:hover { text-decoration: underline; }
.summary-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #007acc; }
.score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
.score-item { background: white; padding: 15px; border-radius: 6px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.score-value { font-size: 1.8em; font-weight: bold; color: #007acc; }
.score-label { color: #666; margin-top: 5px; font-size: 0.9em; }
.analysis-section { margin: 30px 0; padding: 20px; background: #fafafa; border-radius: 8px; border: 1px solid #e0e0e0; }
.analysis-section h2 { color: #333; margin-bottom: 15px; border-bottom: 2px solid #007acc; padding-bottom: 8px; }
.reasoning-text { color: #555; line-height: 1.6; margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border-left: 3px solid #007acc; }
.recommendations { margin-top: 20px; }
.recommendations h3 { color: #007acc; margin-bottom: 10px; }
.recommendations ul { margin: 0; padding-left: 25px; }
.recommendations li { margin: 8px 0; color: #555; line-height: 1.5; display: flex; justify-content: space-between; align-items: flex-start; }
.recommendation-text { flex: 1; margin-right: 10px; }
.fix-button { background: linear-gradient(45deg, #007acc, #005999); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.8em; font-weight: bold; transition: all 0.3s ease; white-space: nowrap; }
.fix-button:hover { background: linear-gradient(45deg, #005999, #003d73); transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.fix-button:active { transform: translateY(0); }
.fix-button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.fix-status { margin-left: 5px; font-size: 0.8em; }
.fix-success { color: #28a745; }
.fix-error { color: #dc3545; }
.fix-loading { color: #ffc107; }
.metrics-section { margin: 30px 0; }
.metrics-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.metrics-table th, .metrics-table td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
.metrics-table th { background-color: #007acc; color: white; }
.quality-indicator { padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; text-align: center; }
.quality-green { background-color: #28a745; }
.quality-yellow { background-color: #ffc107; color: black; }
.quality-red { background-color: #dc3545; }
.final-score { font-size: 2.5em; font-weight: bold; color: #007acc; text-align: center; margin: 20px 0; }
</style>
<script>
function fixWithAI(category, recommendation, button) {
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'Fixing...';
    button.style.background = '#ffc107';
    
    // Create status indicator
    const statusSpan = document.createElement('span');
    statusSpan.className = 'fix-status fix-loading';
    statusSpan.textContent = ' ⏳';
    button.parentNode.appendChild(statusSpan);
    
    // Simulate AI processing (replace with actual API call)
    setTimeout(() => {
        // For demo purposes, randomly succeed or fail
        const success = Math.random() > 0.3;
        
        if (success) {
            button.textContent = 'Fixed ✓';
            button.style.background = '#28a745';
            statusSpan.className = 'fix-status fix-success';
            statusSpan.textContent = ' Applied';
            
            // Show success message
            showNotification('Fix applied successfully for: ' + category, 'success');
        } else {
            button.textContent = 'Retry';
            button.style.background = '#dc3545';
            button.disabled = false;
            statusSpan.className = 'fix-status fix-error';
            statusSpan.textContent = ' Failed';
            
            // Show error message
            showNotification('Failed to apply fix. Please try again.', 'error');
        }
    }, 2000 + Math.random() * 3000); // 2-5 second delay
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        padding: 12px 20px; border-radius: 6px; color: white;
        font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateX(100%); transition: transform 0.3s ease;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    // Slide in
    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
    
    // Slide out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 4000);
}
</script>
</head>
<body>
<div class="container">
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
<div class="header">
<h1>useCalorieCrud.ts</h1>
<p>Detailed Code Analysis Results</p>
</div>
<div class="summary-card">
<div class="final-score">86.8</div>
<div style="text-align: center;">
<span class="quality-indicator quality-green">High Quality</span></div></div>
<div class="score-grid">
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Code Quality</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">SOLID Principles</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Design Patterns</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Security</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Bug Detection</div>
</div>
</div>
<div class="analysis-section">
<h2>Code Quality Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is well-structured and follows good practices such as using hooks and async/await for asynchronous operations. However, it lacks comments and documentation which could make it difficult for other developers to understand the code.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add comments to explain the purpose of each function and the overall module.</span><button class="fix-button" id="fix-code-quality-analysis-0" onclick="fixWithAI('Code Quality Analysis', 'Add comments to explain the purpose of each function and the overall module.', this)" data-category="Code Quality Analysis" data-recommendation="Add comments to explain the purpose of each function and the overall module.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider abstracting the URL construction into a separate function to reduce repetition.</span><button class="fix-button" id="fix-code-quality-analysis-1" onclick="fixWithAI('Code Quality Analysis', 'Consider abstracting the URL construction into a separate function to reduce repetition.', this)" data-category="Code Quality Analysis" data-recommendation="Consider abstracting the URL construction into a separate function to reduce repetition.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a switch statement or a lookup object for the timeframe calculation to make the code more readable.</span><button class="fix-button" id="fix-code-quality-analysis-2" onclick="fixWithAI('Code Quality Analysis', 'Consider using a switch statement or a lookup object for the timeframe calculation to make the code more readable.', this)" data-category="Code Quality Analysis" data-recommendation="Consider using a switch statement or a lookup object for the timeframe calculation to make the code more readable.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding error handling for the async operations to improve robustness.</span><button class="fix-button" id="fix-code-quality-analysis-3" onclick="fixWithAI('Code Quality Analysis', 'Consider adding error handling for the async operations to improve robustness.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding error handling for the async operations to improve robustness.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type annotations for the return values of the functions for better type safety.</span><button class="fix-button" id="fix-code-quality-analysis-4" onclick="fixWithAI('Code Quality Analysis', 'Consider adding type annotations for the return values of the functions for better type safety.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding type annotations for the return values of the functions for better type safety.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>SOLID Principles Analysis (85.0/100)</h2>
<div class="reasoning-text">The code generally adheres to the Single Responsibility Principle, with each function having a clear, single responsibility. However, the &#39;fetchEntries&#39; function is doing too much by handling both fetching entries and fetching daily calories.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Split the &#39;fetchEntries&#39; function into two separate functions: one for fetching entries and another for fetching daily calories.</span><button class="fix-button" id="fix-solid-principles-analysis-0" onclick="fixWithAI('SOLID Principles Analysis', 'Split the &#39;fetchEntries&#39; function into two separate functions: one for fetching entries and another for fetching daily calories.', this)" data-category="SOLID Principles Analysis" data-recommendation="Split the &#39;fetchEntries&#39; function into two separate functions: one for fetching entries and another for fetching daily calories.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function to handle the creation of the URL and query parameters.</span><button class="fix-button" id="fix-solid-principles-analysis-1" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate function to handle the creation of the URL and query parameters.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate function to handle the creation of the URL and query parameters.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function to handle the setting of the date based on the timeframe.</span><button class="fix-button" id="fix-solid-principles-analysis-2" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate function to handle the setting of the date based on the timeframe.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate function to handle the setting of the date based on the timeframe.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function to handle the setting of the loading state.</span><button class="fix-button" id="fix-solid-principles-analysis-3" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate function to handle the setting of the loading state.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate function to handle the setting of the loading state.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function to handle the error handling.</span><button class="fix-button" id="fix-solid-principles-analysis-4" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate function to handle the error handling.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate function to handle the error handling.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Design Patterns Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is well-structured, follows the custom hook pattern in React, and uses TypeScript effectively for type safety. However, there is some repetition in the code that could be reduced.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Consider abstracting the URL construction and query parameter handling into a separate utility function to reduce repetition.</span><button class="fix-button" id="fix-design-patterns-analysis-0" onclick="fixWithAI('Design Patterns Analysis', 'Consider abstracting the URL construction and query parameter handling into a separate utility function to reduce repetition.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider abstracting the URL construction and query parameter handling into a separate utility function to reduce repetition.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function to calculate the date based on the timeframe to reduce the complexity of the fetchEntries function.</span><button class="fix-button" id="fix-design-patterns-analysis-1" onclick="fixWithAI('Design Patterns Analysis', 'Consider creating a separate function to calculate the date based on the timeframe to reduce the complexity of the fetchEntries function.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider creating a separate function to calculate the date based on the timeframe to reduce the complexity of the fetchEntries function.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a switch statement instead of multiple if-else statements for the timeframe calculation to improve readability.</span><button class="fix-button" id="fix-design-patterns-analysis-2" onclick="fixWithAI('Design Patterns Analysis', 'Consider using a switch statement instead of multiple if-else statements for the timeframe calculation to improve readability.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using a switch statement instead of multiple if-else statements for the timeframe calculation to improve readability.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using environment variables for the API URL instead of hardcoding it in the code.</span><button class="fix-button" id="fix-design-patterns-analysis-3" onclick="fixWithAI('Design Patterns Analysis', 'Consider using environment variables for the API URL instead of hardcoding it in the code.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using environment variables for the API URL instead of hardcoding it in the code.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling errors in the try-catch block to improve robustness.</span><button class="fix-button" id="fix-design-patterns-analysis-4" onclick="fixWithAI('Design Patterns Analysis', 'Consider handling errors in the try-catch block to improve robustness.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider handling errors in the try-catch block to improve robustness.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Security Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is generally secure, but it lacks error handling which could lead to unhandled exceptions and potential security vulnerabilities. Also, the use of environment variables directly in the code could expose sensitive data if not properly secured.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add error handling to the async functions to prevent unhandled exceptions.</span><button class="fix-button" id="fix-security-analysis-0" onclick="fixWithAI('Security Analysis', 'Add error handling to the async functions to prevent unhandled exceptions.', this)" data-category="Security Analysis" data-recommendation="Add error handling to the async functions to prevent unhandled exceptions.">Fix with AI</button></li>
<li><span class="recommendation-text">Avoid using environment variables directly in the code. Instead, use a configuration file or a secure way to manage environment variables.</span><button class="fix-button" id="fix-security-analysis-1" onclick="fixWithAI('Security Analysis', 'Avoid using environment variables directly in the code. Instead, use a configuration file or a secure way to manage environment variables.', this)" data-category="Security Analysis" data-recommendation="Avoid using environment variables directly in the code. Instead, use a configuration file or a secure way to manage environment variables.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider validating the &#39;entry&#39; parameter in the &#39;addEntry&#39; and &#39;editEntry&#39; functions to prevent potential data integrity issues.</span><button class="fix-button" id="fix-security-analysis-2" onclick="fixWithAI('Security Analysis', 'Consider validating the &#39;entry&#39; parameter in the &#39;addEntry&#39; and &#39;editEntry&#39; functions to prevent potential data integrity issues.', this)" data-category="Security Analysis" data-recommendation="Consider validating the &#39;entry&#39; parameter in the &#39;addEntry&#39; and &#39;editEntry&#39; functions to prevent potential data integrity issues.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that the &#39;token&#39; parameter in the &#39;useCalorieApi&#39; function is securely handled and stored.</span><button class="fix-button" id="fix-security-analysis-3" onclick="fixWithAI('Security Analysis', 'Ensure that the &#39;token&#39; parameter in the &#39;useCalorieApi&#39; function is securely handled and stored.', this)" data-category="Security Analysis" data-recommendation="Ensure that the &#39;token&#39; parameter in the &#39;useCalorieApi&#39; function is securely handled and stored.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider limiting the number of entries that can be fetched at once to prevent potential Denial of Service (DoS) attacks.</span><button class="fix-button" id="fix-security-analysis-4" onclick="fixWithAI('Security Analysis', 'Consider limiting the number of entries that can be fetched at once to prevent potential Denial of Service (DoS) attacks.', this)" data-category="Security Analysis" data-recommendation="Consider limiting the number of entries that can be fetched at once to prevent potential Denial of Service (DoS) attacks.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Bug Detection Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is mostly well-written, but it does not handle potential errors that might occur during the API calls. This could lead to unhandled promise rejections.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add error handling for the API calls in the &#39;fetchEntries&#39;, &#39;addEntry&#39;, &#39;editEntry&#39;, and &#39;deleteEntry&#39; functions.</span><button class="fix-button" id="fix-bug-detection-analysis-0" onclick="fixWithAI('Bug Detection Analysis', 'Add error handling for the API calls in the &#39;fetchEntries&#39;, &#39;addEntry&#39;, &#39;editEntry&#39;, and &#39;deleteEntry&#39; functions.', this)" data-category="Bug Detection Analysis" data-recommendation="Add error handling for the API calls in the &#39;fetchEntries&#39;, &#39;addEntry&#39;, &#39;editEntry&#39;, and &#39;deleteEntry&#39; functions.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type checking for the data returned from the API calls before setting the state.</span><button class="fix-button" id="fix-bug-detection-analysis-1" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding type checking for the data returned from the API calls before setting the state.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding type checking for the data returned from the API calls before setting the state.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that the API endpoints being used are correct and exist.</span><button class="fix-button" id="fix-bug-detection-analysis-2" onclick="fixWithAI('Bug Detection Analysis', 'Ensure that the API endpoints being used are correct and exist.', this)" data-category="Bug Detection Analysis" data-recommendation="Ensure that the API endpoints being used are correct and exist.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding a check to ensure that &#39;token&#39; is valid before making API calls.</span><button class="fix-button" id="fix-bug-detection-analysis-3" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding a check to ensure that &#39;token&#39; is valid before making API calls.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding a check to ensure that &#39;token&#39; is valid before making API calls.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding a default case in the timeframe condition to handle unexpected values.</span><button class="fix-button" id="fix-bug-detection-analysis-4" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding a default case in the timeframe condition to handle unexpected values.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding a default case in the timeframe condition to handle unexpected values.">Fix with AI</button></li>
</ul></div>
</div>
<div class="metrics-section">
<h2>File Metrics</h2>
<table class="metrics-table">
<tr><th>Metric</th><th>Value</th></tr>
<tr><td>Comment ratio</td><td>0.0</td></tr>
<tr><td>Lines of code</td><td>68</td></tr>
<tr><td>Number of methods</td><td>5</td></tr>
<tr><td>Number of classes</td><td>1</td></tr>
<tr><td>Cyclomatic complexity</td><td>4</td></tr>
<tr><td>Code complexity</td><td>MEDIUM</td></tr>
</table></div>
<div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
<p>Analysis generated on 2025-08-03 12:58:17 by Code Guard</p>
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
</div>
</div>
</body>
</html>
