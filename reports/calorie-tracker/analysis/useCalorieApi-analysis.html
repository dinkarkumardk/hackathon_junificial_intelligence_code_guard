<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>useCalorieApi.ts - Detailed Analysis</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
.container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #007acc; }
.header h1 { color: #007acc; margin: 0; font-size: 2.2em; }
.back-link { display: inline-block; margin-bottom: 20px; color: #007acc; text-decoration: none; font-weight: bold; }
.back-link:hover { text-decoration: underline; }
.summary-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #007acc; }
.score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
.score-item { background: white; padding: 15px; border-radius: 6px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.score-value { font-size: 1.8em; font-weight: bold; color: #007acc; }
.score-label { color: #666; margin-top: 5px; font-size: 0.9em; }
.analysis-section { margin: 30px 0; padding: 20px; background: #fafafa; border-radius: 8px; border: 1px solid #e0e0e0; }
.analysis-section h2 { color: #333; margin-bottom: 15px; border-bottom: 2px solid #007acc; padding-bottom: 8px; }
.reasoning-text { color: #555; line-height: 1.6; margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border-left: 3px solid #007acc; }
.recommendations { margin-top: 20px; }
.recommendations h3 { color: #007acc; margin-bottom: 10px; }
.recommendations ul { margin: 0; padding-left: 25px; }
.recommendations li { margin: 8px 0; color: #555; line-height: 1.5; display: flex; justify-content: space-between; align-items: flex-start; }
.recommendation-text { flex: 1; margin-right: 10px; }
.fix-button { background: linear-gradient(45deg, #007acc, #005999); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.8em; font-weight: bold; transition: all 0.3s ease; white-space: nowrap; }
.fix-button:hover { background: linear-gradient(45deg, #005999, #003d73); transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.fix-button:active { transform: translateY(0); }
.fix-button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.fix-status { margin-left: 5px; font-size: 0.8em; }
.fix-success { color: #28a745; }
.fix-error { color: #dc3545; }
.fix-loading { color: #ffc107; }
.metrics-section { margin: 30px 0; }
.metrics-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.metrics-table th, .metrics-table td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
.metrics-table th { background-color: #007acc; color: white; }
.quality-indicator { padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; text-align: center; }
.quality-green { background-color: #28a745; }
.quality-yellow { background-color: #ffc107; color: black; }
.quality-red { background-color: #dc3545; }
.final-score { font-size: 2.5em; font-weight: bold; color: #007acc; text-align: center; margin: 20px 0; }
</style>
<script>
function fixWithAI(category, recommendation, button) {
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'Fixing...';
    button.style.background = '#ffc107';
    
    // Create status indicator
    const statusSpan = document.createElement('span');
    statusSpan.className = 'fix-status fix-loading';
    statusSpan.textContent = ' ⏳';
    button.parentNode.appendChild(statusSpan);
    
    // Simulate AI processing (replace with actual API call)
    setTimeout(() => {
        // For demo purposes, randomly succeed or fail
        const success = Math.random() > 0.3;
        
        if (success) {
            button.textContent = 'Fixed ✓';
            button.style.background = '#28a745';
            statusSpan.className = 'fix-status fix-success';
            statusSpan.textContent = ' Applied';
            
            // Show success message
            showNotification('Fix applied successfully for: ' + category, 'success');
        } else {
            button.textContent = 'Retry';
            button.style.background = '#dc3545';
            button.disabled = false;
            statusSpan.className = 'fix-status fix-error';
            statusSpan.textContent = ' Failed';
            
            // Show error message
            showNotification('Failed to apply fix. Please try again.', 'error');
        }
    }, 2000 + Math.random() * 3000); // 2-5 second delay
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        padding: 12px 20px; border-radius: 6px; color: white;
        font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateX(100%); transition: transform 0.3s ease;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    // Slide in
    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
    
    // Slide out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 4000);
}
</script>
</head>
<body>
<div class="container">
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
<div class="header">
<h1>useCalorieApi.ts</h1>
<p>Detailed Code Analysis Results</p>
</div>
<div class="summary-card">
<div class="final-score">86.8</div>
<div style="text-align: center;">
<span class="quality-indicator quality-green">High Quality</span></div></div>
<div class="score-grid">
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Code Quality</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">SOLID Principles</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Design Patterns</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Security</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Bug Detection</div>
</div>
</div>
<div class="analysis-section">
<h2>Code Quality Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is well-structured, easy to read, and follows good practices. However, it lacks comments and documentation which are important for maintainability and understanding the code&#39;s purpose.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add comments to explain the purpose of the functions and the parameters they take.</span><button class="fix-button" id="fix-code-quality-analysis-0" onclick="fixWithAI('Code Quality Analysis', 'Add comments to explain the purpose of the functions and the parameters they take.', this)" data-category="Code Quality Analysis" data-recommendation="Add comments to explain the purpose of the functions and the parameters they take.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding error handling for other status codes, not just 401.</span><button class="fix-button" id="fix-code-quality-analysis-1" onclick="fixWithAI('Code Quality Analysis', 'Consider adding error handling for other status codes, not just 401.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding error handling for other status codes, not just 401.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type annotations for the return types of the functions for better type safety.</span><button class="fix-button" id="fix-code-quality-analysis-2" onclick="fixWithAI('Code Quality Analysis', 'Consider adding type annotations for the return types of the functions for better type safety.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding type annotations for the return types of the functions for better type safety.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding a default case in the apiFetch function to handle unexpected cases.</span><button class="fix-button" id="fix-code-quality-analysis-3" onclick="fixWithAI('Code Quality Analysis', 'Consider adding a default case in the apiFetch function to handle unexpected cases.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding a default case in the apiFetch function to handle unexpected cases.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding tests to ensure the code works as expected.</span><button class="fix-button" id="fix-code-quality-analysis-4" onclick="fixWithAI('Code Quality Analysis', 'Consider adding tests to ensure the code works as expected.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding tests to ensure the code works as expected.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>SOLID Principles Analysis (85.0/100)</h2>
<div class="reasoning-text">The function &#39;useCalorieApi&#39; is mostly adhering to the Single Responsibility Principle. However, it is handling both the API calls and the authentication logic, which could be separated for better adherence to SRP.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Separate the authentication logic from the API calls into a different function or module.</span><button class="fix-button" id="fix-solid-principles-analysis-0" onclick="fixWithAI('SOLID Principles Analysis', 'Separate the authentication logic from the API calls into a different function or module.', this)" data-category="SOLID Principles Analysis" data-recommendation="Separate the authentication logic from the API calls into a different function or module.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate &#39;apiFetch&#39; function that can be reused by other functions or modules.</span><button class="fix-button" id="fix-solid-principles-analysis-1" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate &#39;apiFetch&#39; function that can be reused by other functions or modules.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate &#39;apiFetch&#39; function that can be reused by other functions or modules.">Fix with AI</button></li>
<li><span class="recommendation-text">The &#39;logout&#39; function could be handled in a separate authentication module.</span><button class="fix-button" id="fix-solid-principles-analysis-2" onclick="fixWithAI('SOLID Principles Analysis', 'The &#39;logout&#39; function could be handled in a separate authentication module.', this)" data-category="SOLID Principles Analysis" data-recommendation="The &#39;logout&#39; function could be handled in a separate authentication module.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating separate functions for handling the response and error cases.</span><button class="fix-button" id="fix-solid-principles-analysis-3" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating separate functions for handling the response and error cases.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating separate functions for handling the response and error cases.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider creating a separate function for setting headers.</span><button class="fix-button" id="fix-solid-principles-analysis-4" onclick="fixWithAI('SOLID Principles Analysis', 'Consider creating a separate function for setting headers.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider creating a separate function for setting headers.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Design Patterns Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is well-structured and follows the Factory design pattern, creating an API client with different methods (get, post, put, delete). However, it lacks error handling for network errors or non-401 HTTP status codes.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add a try-catch block around the fetch call in apiFetch to handle network errors.</span><button class="fix-button" id="fix-design-patterns-analysis-0" onclick="fixWithAI('Design Patterns Analysis', 'Add a try-catch block around the fetch call in apiFetch to handle network errors.', this)" data-category="Design Patterns Analysis" data-recommendation="Add a try-catch block around the fetch call in apiFetch to handle network errors.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling other HTTP status codes, not just 401. You could throw an error for any status code outside the 200-299 range.</span><button class="fix-button" id="fix-design-patterns-analysis-1" onclick="fixWithAI('Design Patterns Analysis', 'Consider handling other HTTP status codes, not just 401. You could throw an error for any status code outside the 200-299 range.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider handling other HTTP status codes, not just 401. You could throw an error for any status code outside the 200-299 range.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider returning the JSON response directly from the apiFetch function to avoid repeating the &#39;res.json()&#39; line in each method.</span><button class="fix-button" id="fix-design-patterns-analysis-2" onclick="fixWithAI('Design Patterns Analysis', 'Consider returning the JSON response directly from the apiFetch function to avoid repeating the &#39;res.json()&#39; line in each method.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider returning the JSON response directly from the apiFetch function to avoid repeating the &#39;res.json()&#39; line in each method.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding types for the response of the fetch calls to take full advantage of TypeScript&#39;s type checking.</span><button class="fix-button" id="fix-design-patterns-analysis-3" onclick="fixWithAI('Design Patterns Analysis', 'Consider adding types for the response of the fetch calls to take full advantage of TypeScript&#39;s type checking.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider adding types for the response of the fetch calls to take full advantage of TypeScript&#39;s type checking.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding JSDoc comments to your functions to provide more context about what each function does, what parameters it expects, and what it returns.</span><button class="fix-button" id="fix-design-patterns-analysis-4" onclick="fixWithAI('Design Patterns Analysis', 'Consider adding JSDoc comments to your functions to provide more context about what each function does, what parameters it expects, and what it returns.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider adding JSDoc comments to your functions to provide more context about what each function does, what parameters it expects, and what it returns.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Security Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is generally secure, but it lacks input validation and error handling which could potentially lead to security vulnerabilities.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Implement input validation to ensure that the URL and body parameters are in the expected format and type.</span><button class="fix-button" id="fix-security-analysis-0" onclick="fixWithAI('Security Analysis', 'Implement input validation to ensure that the URL and body parameters are in the expected format and type.', this)" data-category="Security Analysis" data-recommendation="Implement input validation to ensure that the URL and body parameters are in the expected format and type.">Fix with AI</button></li>
<li><span class="recommendation-text">Add error handling for the fetch function to handle network errors or server errors.</span><button class="fix-button" id="fix-security-analysis-1" onclick="fixWithAI('Security Analysis', 'Add error handling for the fetch function to handle network errors or server errors.', this)" data-category="Security Analysis" data-recommendation="Add error handling for the fetch function to handle network errors or server errors.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a more secure way to store and handle the token, such as HttpOnly cookies or secure context storage.</span><button class="fix-button" id="fix-security-analysis-2" onclick="fixWithAI('Security Analysis', 'Consider using a more secure way to store and handle the token, such as HttpOnly cookies or secure context storage.', this)" data-category="Security Analysis" data-recommendation="Consider using a more secure way to store and handle the token, such as HttpOnly cookies or secure context storage.">Fix with AI</button></li>
<li><span class="recommendation-text">Ensure that CORS and other security-related headers are properly set on the server-side.</span><button class="fix-button" id="fix-security-analysis-3" onclick="fixWithAI('Security Analysis', 'Ensure that CORS and other security-related headers are properly set on the server-side.', this)" data-category="Security Analysis" data-recommendation="Ensure that CORS and other security-related headers are properly set on the server-side.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a well-tested library for making HTTP requests, which may provide additional security features and checks.</span><button class="fix-button" id="fix-security-analysis-4" onclick="fixWithAI('Security Analysis', 'Consider using a well-tested library for making HTTP requests, which may provide additional security features and checks.', this)" data-category="Security Analysis" data-recommendation="Consider using a well-tested library for making HTTP requests, which may provide additional security features and checks.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Bug Detection Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is mostly correct, but it does not handle potential network errors or check if the response from the fetch request is ok before trying to convert it to JSON.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add error handling for network errors in the fetch request.</span><button class="fix-button" id="fix-bug-detection-analysis-0" onclick="fixWithAI('Bug Detection Analysis', 'Add error handling for network errors in the fetch request.', this)" data-category="Bug Detection Analysis" data-recommendation="Add error handling for network errors in the fetch request.">Fix with AI</button></li>
<li><span class="recommendation-text">Check if the response from the fetch request is ok before trying to convert it to JSON.</span><button class="fix-button" id="fix-bug-detection-analysis-1" onclick="fixWithAI('Bug Detection Analysis', 'Check if the response from the fetch request is ok before trying to convert it to JSON.', this)" data-category="Bug Detection Analysis" data-recommendation="Check if the response from the fetch request is ok before trying to convert it to JSON.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type definitions for the response from the API.</span><button class="fix-button" id="fix-bug-detection-analysis-2" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding type definitions for the response from the API.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding type definitions for the response from the API.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling other HTTP status codes, not just 401.</span><button class="fix-button" id="fix-bug-detection-analysis-3" onclick="fixWithAI('Bug Detection Analysis', 'Consider handling other HTTP status codes, not just 401.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider handling other HTTP status codes, not just 401.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider returning the response body directly in the &#39;del&#39; function instead of the whole response object.</span><button class="fix-button" id="fix-bug-detection-analysis-4" onclick="fixWithAI('Bug Detection Analysis', 'Consider returning the response body directly in the &#39;del&#39; function instead of the whole response object.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider returning the response body directly in the &#39;del&#39; function instead of the whole response object.">Fix with AI</button></li>
</ul></div>
</div>
<div class="metrics-section">
<h2>File Metrics</h2>
<table class="metrics-table">
<tr><th>Metric</th><th>Value</th></tr>
<tr><td>Comment ratio</td><td>0.0</td></tr>
<tr><td>Lines of code</td><td>42</td></tr>
<tr><td>Number of methods</td><td>6</td></tr>
<tr><td>Number of classes</td><td>0</td></tr>
<tr><td>Cyclomatic complexity</td><td>2</td></tr>
<tr><td>Code complexity</td><td>MEDIUM</td></tr>
</table></div>
<div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
<p>Analysis generated on 2025-08-03 12:58:17 by Code Guard</p>
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
</div>
</div>
</body>
</html>
