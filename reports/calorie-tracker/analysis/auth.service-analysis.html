<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>auth.service.ts - Detailed Analysis</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
.container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #007acc; }
.header h1 { color: #007acc; margin: 0; font-size: 2.2em; }
.back-link { display: inline-block; margin-bottom: 20px; color: #007acc; text-decoration: none; font-weight: bold; }
.back-link:hover { text-decoration: underline; }
.summary-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #007acc; }
.score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
.score-item { background: white; padding: 15px; border-radius: 6px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.score-value { font-size: 1.8em; font-weight: bold; color: #007acc; }
.score-label { color: #666; margin-top: 5px; font-size: 0.9em; }
.analysis-section { margin: 30px 0; padding: 20px; background: #fafafa; border-radius: 8px; border: 1px solid #e0e0e0; }
.analysis-section h2 { color: #333; margin-bottom: 15px; border-bottom: 2px solid #007acc; padding-bottom: 8px; }
.reasoning-text { color: #555; line-height: 1.6; margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border-left: 3px solid #007acc; }
.recommendations { margin-top: 20px; }
.recommendations h3 { color: #007acc; margin-bottom: 10px; }
.recommendations ul { margin: 0; padding-left: 25px; }
.recommendations li { margin: 8px 0; color: #555; line-height: 1.5; display: flex; justify-content: space-between; align-items: flex-start; }
.recommendation-text { flex: 1; margin-right: 10px; }
.fix-button { background: linear-gradient(45deg, #007acc, #005999); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.8em; font-weight: bold; transition: all 0.3s ease; white-space: nowrap; }
.fix-button:hover { background: linear-gradient(45deg, #005999, #003d73); transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.fix-button:active { transform: translateY(0); }
.fix-button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.fix-status { margin-left: 5px; font-size: 0.8em; }
.fix-success { color: #28a745; }
.fix-error { color: #dc3545; }
.fix-loading { color: #ffc107; }
.metrics-section { margin: 30px 0; }
.metrics-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.metrics-table th, .metrics-table td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
.metrics-table th { background-color: #007acc; color: white; }
.quality-indicator { padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; text-align: center; }
.quality-green { background-color: #28a745; }
.quality-yellow { background-color: #ffc107; color: black; }
.quality-red { background-color: #dc3545; }
.final-score { font-size: 2.5em; font-weight: bold; color: #007acc; text-align: center; margin: 20px 0; }
</style>
<script>
function fixWithAI(category, recommendation, button) {
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'Fixing...';
    button.style.background = '#ffc107';
    
    // Create status indicator
    const statusSpan = document.createElement('span');
    statusSpan.className = 'fix-status fix-loading';
    statusSpan.textContent = ' ⏳';
    button.parentNode.appendChild(statusSpan);
    
    // Simulate AI processing (replace with actual API call)
    setTimeout(() => {
        // For demo purposes, randomly succeed or fail
        const success = Math.random() > 0.3;
        
        if (success) {
            button.textContent = 'Fixed ✓';
            button.style.background = '#28a745';
            statusSpan.className = 'fix-status fix-success';
            statusSpan.textContent = ' Applied';
            
            // Show success message
            showNotification('Fix applied successfully for: ' + category, 'success');
        } else {
            button.textContent = 'Retry';
            button.style.background = '#dc3545';
            button.disabled = false;
            statusSpan.className = 'fix-status fix-error';
            statusSpan.textContent = ' Failed';
            
            // Show error message
            showNotification('Failed to apply fix. Please try again.', 'error');
        }
    }, 2000 + Math.random() * 3000); // 2-5 second delay
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        padding: 12px 20px; border-radius: 6px; color: white;
        font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateX(100%); transition: transform 0.3s ease;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    // Slide in
    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
    
    // Slide out and remove
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 4000);
}
</script>
</head>
<body>
<div class="container">
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
<div class="header">
<h1>auth.service.ts</h1>
<p>Detailed Code Analysis Results</p>
</div>
<div class="summary-card">
<div class="final-score">85.0</div>
<div style="text-align: center;">
<span class="quality-indicator quality-green">High Quality</span></div></div>
<div class="score-grid">
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Code Quality</div>
</div>
<div class="score-item">
<div class="score-value">80.0</div>
<div class="score-label">SOLID Principles</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Design Patterns</div>
</div>
<div class="score-item">
<div class="score-value">85.0</div>
<div class="score-label">Security</div>
</div>
<div class="score-item">
<div class="score-value">90.0</div>
<div class="score-label">Bug Detection</div>
</div>
</div>
<div class="analysis-section">
<h2>Code Quality Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is well-structured and follows good practices of TypeScript and NestJS. However, it lacks comments and documentation which makes it less readable and maintainable.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add comments to explain the purpose of each method and complex code blocks within methods.</span><button class="fix-button" id="fix-code-quality-analysis-0" onclick="fixWithAI('Code Quality Analysis', 'Add comments to explain the purpose of each method and complex code blocks within methods.', this)" data-category="Code Quality Analysis" data-recommendation="Add comments to explain the purpose of each method and complex code blocks within methods.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type annotations to the &#39;payload&#39; variable for better type safety and readability.</span><button class="fix-button" id="fix-code-quality-analysis-1" onclick="fixWithAI('Code Quality Analysis', 'Consider adding type annotations to the &#39;payload&#39; variable for better type safety and readability.', this)" data-category="Code Quality Analysis" data-recommendation="Consider adding type annotations to the &#39;payload&#39; variable for better type safety and readability.">Fix with AI</button></li>
<li><span class="recommendation-text">Handle specific error types in the catch block instead of throwing a generic error.</span><button class="fix-button" id="fix-code-quality-analysis-2" onclick="fixWithAI('Code Quality Analysis', 'Handle specific error types in the catch block instead of throwing a generic error.', this)" data-category="Code Quality Analysis" data-recommendation="Handle specific error types in the catch block instead of throwing a generic error.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider separating the user creation logic into a separate method to improve code modularity and readability.</span><button class="fix-button" id="fix-code-quality-analysis-3" onclick="fixWithAI('Code Quality Analysis', 'Consider separating the user creation logic into a separate method to improve code modularity and readability.', this)" data-category="Code Quality Analysis" data-recommendation="Consider separating the user creation logic into a separate method to improve code modularity and readability.">Fix with AI</button></li>
<li><span class="recommendation-text">Use environment variables for sensitive data like &#39;GOOGLE_CLIENT_ID&#39; instead of hardcoding them.</span><button class="fix-button" id="fix-code-quality-analysis-4" onclick="fixWithAI('Code Quality Analysis', 'Use environment variables for sensitive data like &#39;GOOGLE_CLIENT_ID&#39; instead of hardcoding them.', this)" data-category="Code Quality Analysis" data-recommendation="Use environment variables for sensitive data like &#39;GOOGLE_CLIENT_ID&#39; instead of hardcoding them.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>SOLID Principles Analysis (80.0/100)</h2>
<div class="reasoning-text">The AuthService class primarily adheres to the Single Responsibility Principle, focusing on authentication-related tasks. However, it also handles user creation and updates, which could be separated into a different service.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Separate the user creation and update logic into a UserService.</span><button class="fix-button" id="fix-solid-principles-analysis-0" onclick="fixWithAI('SOLID Principles Analysis', 'Separate the user creation and update logic into a UserService.', this)" data-category="SOLID Principles Analysis" data-recommendation="Separate the user creation and update logic into a UserService.">Fix with AI</button></li>
<li><span class="recommendation-text">The tokenSignin method could be simplified by breaking it down into smaller methods, each with a single responsibility.</span><button class="fix-button" id="fix-solid-principles-analysis-1" onclick="fixWithAI('SOLID Principles Analysis', 'The tokenSignin method could be simplified by breaking it down into smaller methods, each with a single responsibility.', this)" data-category="SOLID Principles Analysis" data-recommendation="The tokenSignin method could be simplified by breaking it down into smaller methods, each with a single responsibility.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling token verification and user authentication in separate methods.</span><button class="fix-button" id="fix-solid-principles-analysis-2" onclick="fixWithAI('SOLID Principles Analysis', 'Consider handling token verification and user authentication in separate methods.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider handling token verification and user authentication in separate methods.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider moving the error logging to a separate LoggerService.</span><button class="fix-button" id="fix-solid-principles-analysis-3" onclick="fixWithAI('SOLID Principles Analysis', 'Consider moving the error logging to a separate LoggerService.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider moving the error logging to a separate LoggerService.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider moving the JWT token signing to a separate TokenService.</span><button class="fix-button" id="fix-solid-principles-analysis-4" onclick="fixWithAI('SOLID Principles Analysis', 'Consider moving the JWT token signing to a separate TokenService.', this)" data-category="SOLID Principles Analysis" data-recommendation="Consider moving the JWT token signing to a separate TokenService.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Design Patterns Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is well-structured and follows the Dependency Injection pattern, but it lacks error handling for the case when the Google Client ID is not found in the configuration. Also, the user creation and update logic could be improved.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Add error handling for the case when the Google Client ID is not found in the configuration.</span><button class="fix-button" id="fix-design-patterns-analysis-0" onclick="fixWithAI('Design Patterns Analysis', 'Add error handling for the case when the Google Client ID is not found in the configuration.', this)" data-category="Design Patterns Analysis" data-recommendation="Add error handling for the case when the Google Client ID is not found in the configuration.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider separating the user creation and update logic into separate methods to improve code readability and maintainability.</span><button class="fix-button" id="fix-design-patterns-analysis-1" onclick="fixWithAI('Design Patterns Analysis', 'Consider separating the user creation and update logic into separate methods to improve code readability and maintainability.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider separating the user creation and update logic into separate methods to improve code readability and maintainability.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using the Repository pattern for database operations to abstract away the details of the database access.</span><button class="fix-button" id="fix-design-patterns-analysis-2" onclick="fixWithAI('Design Patterns Analysis', 'Consider using the Repository pattern for database operations to abstract away the details of the database access.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using the Repository pattern for database operations to abstract away the details of the database access.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a Factory pattern for creating the User object to encapsulate the creation logic.</span><button class="fix-button" id="fix-design-patterns-analysis-3" onclick="fixWithAI('Design Patterns Analysis', 'Consider using a Factory pattern for creating the User object to encapsulate the creation logic.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using a Factory pattern for creating the User object to encapsulate the creation logic.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a Strategy pattern for different types of authentication methods to make the code more flexible and easier to extend in the future.</span><button class="fix-button" id="fix-design-patterns-analysis-4" onclick="fixWithAI('Design Patterns Analysis', 'Consider using a Strategy pattern for different types of authentication methods to make the code more flexible and easier to extend in the future.', this)" data-category="Design Patterns Analysis" data-recommendation="Consider using a Strategy pattern for different types of authentication methods to make the code more flexible and easier to extend in the future.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Security Analysis (85.0/100)</h2>
<div class="reasoning-text">The code is generally secure, but there are some areas where it could be improved. The main concern is the lack of error handling and the potential for information disclosure through error messages.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Implement proper error handling to prevent potential information disclosure. For example, do not disclose the specific error message to the user, instead return a generic error message.</span><button class="fix-button" id="fix-security-analysis-0" onclick="fixWithAI('Security Analysis', 'Implement proper error handling to prevent potential information disclosure. For example, do not disclose the specific error message to the user, instead return a generic error message.', this)" data-category="Security Analysis" data-recommendation="Implement proper error handling to prevent potential information disclosure. For example, do not disclose the specific error message to the user, instead return a generic error message.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding additional checks on the payload data received from the Google token. For example, validate the &#39;name&#39; and &#39;picture&#39; fields to ensure they meet your application&#39;s requirements.</span><button class="fix-button" id="fix-security-analysis-1" onclick="fixWithAI('Security Analysis', 'Consider adding additional checks on the payload data received from the Google token. For example, validate the &#39;name&#39; and &#39;picture&#39; fields to ensure they meet your application&#39;s requirements.', this)" data-category="Security Analysis" data-recommendation="Consider adding additional checks on the payload data received from the Google token. For example, validate the &#39;name&#39; and &#39;picture&#39; fields to ensure they meet your application&#39;s requirements.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider using a more secure method for storing the access token. Storing it directly on the user object could potentially expose it if the user object is returned in a response.</span><button class="fix-button" id="fix-security-analysis-2" onclick="fixWithAI('Security Analysis', 'Consider using a more secure method for storing the access token. Storing it directly on the user object could potentially expose it if the user object is returned in a response.', this)" data-category="Security Analysis" data-recommendation="Consider using a more secure method for storing the access token. Storing it directly on the user object could potentially expose it if the user object is returned in a response.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding rate limiting to prevent brute force attacks on the tokenSignin endpoint.</span><button class="fix-button" id="fix-security-analysis-3" onclick="fixWithAI('Security Analysis', 'Consider adding rate limiting to prevent brute force attacks on the tokenSignin endpoint.', this)" data-category="Security Analysis" data-recommendation="Consider adding rate limiting to prevent brute force attacks on the tokenSignin endpoint.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding additional logging for security events, such as failed login attempts, to aid in detecting and investigating potential security incidents.</span><button class="fix-button" id="fix-security-analysis-4" onclick="fixWithAI('Security Analysis', 'Consider adding additional logging for security events, such as failed login attempts, to aid in detecting and investigating potential security incidents.', this)" data-category="Security Analysis" data-recommendation="Consider adding additional logging for security events, such as failed login attempts, to aid in detecting and investigating potential security incidents.">Fix with AI</button></li>
</ul></div>
</div>
<div class="analysis-section">
<h2>Bug Detection Analysis (90.0/100)</h2>
<div class="reasoning-text">The code is mostly well-written, but there is a potential issue with error handling. When an error occurs, the original error message is logged, but a new generic error is thrown, which could make debugging more difficult.</div>
<div class="recommendations">
<h3>Recommendations</h3>
<ul>
<li><span class="recommendation-text">Consider re-throwing the original error after logging it, to preserve the original error message and stack trace.</span><button class="fix-button" id="fix-bug-detection-analysis-0" onclick="fixWithAI('Bug Detection Analysis', 'Consider re-throwing the original error after logging it, to preserve the original error message and stack trace.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider re-throwing the original error after logging it, to preserve the original error message and stack trace.">Fix with AI</button></li>
<li><span class="recommendation-text">Add null checks or optional chaining for accessing properties of &#39;payload&#39; to avoid potential null pointer exceptions.</span><button class="fix-button" id="fix-bug-detection-analysis-1" onclick="fixWithAI('Bug Detection Analysis', 'Add null checks or optional chaining for accessing properties of &#39;payload&#39; to avoid potential null pointer exceptions.', this)" data-category="Bug Detection Analysis" data-recommendation="Add null checks or optional chaining for accessing properties of &#39;payload&#39; to avoid potential null pointer exceptions.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider handling the case where &#39;name&#39; or &#39;picture&#39; are not present in the payload.</span><button class="fix-button" id="fix-bug-detection-analysis-2" onclick="fixWithAI('Bug Detection Analysis', 'Consider handling the case where &#39;name&#39; or &#39;picture&#39; are not present in the payload.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider handling the case where &#39;name&#39; or &#39;picture&#39; are not present in the payload.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding type checking or assertions for the expected types of the payload properties.</span><button class="fix-button" id="fix-bug-detection-analysis-3" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding type checking or assertions for the expected types of the payload properties.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding type checking or assertions for the expected types of the payload properties.">Fix with AI</button></li>
<li><span class="recommendation-text">Consider adding more detailed logging, such as logging the payload or other relevant information, to help with debugging.</span><button class="fix-button" id="fix-bug-detection-analysis-4" onclick="fixWithAI('Bug Detection Analysis', 'Consider adding more detailed logging, such as logging the payload or other relevant information, to help with debugging.', this)" data-category="Bug Detection Analysis" data-recommendation="Consider adding more detailed logging, such as logging the payload or other relevant information, to help with debugging.">Fix with AI</button></li>
</ul></div>
</div>
<div class="metrics-section">
<h2>File Metrics</h2>
<table class="metrics-table">
<tr><th>Metric</th><th>Value</th></tr>
<tr><td>Comment ratio</td><td>0.0</td></tr>
<tr><td>Lines of code</td><td>58</td></tr>
<tr><td>Number of methods</td><td>2</td></tr>
<tr><td>Number of classes</td><td>1</td></tr>
<tr><td>Cyclomatic complexity</td><td>6</td></tr>
<tr><td>Code complexity</td><td>MEDIUM</td></tr>
</table></div>
<div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
<p>Analysis generated on 2025-08-03 12:58:17 by Code Guard</p>
<a href="../technical-report.html" class="back-link">← Back to Technical Report</a>
</div>
</div>
</body>
</html>
